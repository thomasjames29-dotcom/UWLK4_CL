<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>PitchWalker - Ultimate Edition</title>
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0d1b0e">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/53/53283.png">
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" href="style.css">
</head>
<body class="crt">

    <div id="game-toast" onclick="dismissToast()">NOTIFICATION</div>
    <div id="gps-status" class="status-dot"></div>

    <div id="pack-overlay" class="pack-overlay" style="display:none;" onclick="revealPack()">
        <div id="pack-wrapper" class="pack-wrapper">
            <div class="pack-body">üì¶</div>
            <div class="pack-label">TAP TO OPEN</div>
        </div>
        <div id="pack-card-display" style="display:none;"></div>
    </div>

    <div id="match-view" class="view-container full-panel" style="background:#000; z-index:15000;">
        <div class="scoreboard">
            <div class="team-label">YOU</div>
            <div class="score-box"><span id="score-home">0</span> - <span id="score-away">0</span></div>
            <div class="team-label">OPP</div>
        </div>
        <div class="timer-box" id="match-time">0'</div>
        <div class="pitch-visual">
            <div class="pitch-field">
                <div class="pitch-center-circle"></div>
                <div class="pitch-center-line"></div>
            </div>
        </div>
        <div class="commentary-box" id="match-comm">MATCH READY...</div>
        <button id="match-end-btn" class="btn btn-green" style="display:none; margin:20px;" onclick="endMatch()">EXIT MATCH</button>
    </div>

    <div id="intro-layer">
        <div class="title-container" id="title-box">
            <div class="intro-logo">‚öΩ</div>
            <h1 class="game-title">PITCH<span class="title-sub">WALKER</span></h1>
            <div class="version-tag">ULTIMATE EDITION v100</div>
            <div class="tagline">Pokemon GO meets FIFA Ultimate Team</div>
            <button class="btn btn-green start-btn" onclick="showLogin()">TAP TO START</button>
        </div>
        
        <div class="login-box" id="login-box">
            <h2 style="color:#cc0000;">CREATE MANAGER</h2>
            <input type="text" id="inp-name" class="input-field" placeholder="ENTER YOUR NAME" maxlength="15">
            <button class="btn btn-green" onclick="createAccount()">START CAREER</button>
            <button class="btn btn-red" onclick="backToTitle()">CANCEL</button>
        </div>
    </div>

    <div id="view-map" class="view-container">
        <div id="map-container">
            <div id="map"></div>
            <div class="radar-sweep"></div>
            <div class="map-corner top-left"></div>
            <div class="map-corner top-right"></div>
            <div class="map-corner bottom-left"></div>
            <div class="map-corner bottom-right"></div>
        </div>
        <div class="map-overlay"></div>
        <button class="store-btn" onclick="openBag()">üõí</button>
        <button id="gps-btn" class="map-btn" onclick="recenterMap()">üéØ</button>
        <button class="pack-btn" onclick="openPackManager()">üì¶</button>
        <div class="map-stats">
            <div class="stat-pill">üí∞ <span id="map-coins">0</span></div>
            <div class="stat-pill">‚≠ê LV <span id="map-level">1</span></div>
        </div>
        <div id="incubator-display" class="incubator-display"></div>
        <div class="active-contract-hud">
            <div class="contract-hud-title">üìã CONTRACTS</div>
            <div class="active-row"></div>
        </div>
    </div>

    <div id="view-squad" class="view-container full-panel">
        <div class="panel-header">
            <h2>MY SQUAD</h2>
            <div class="squad-stats">
                <span class="stat-badge">OVR: <strong id="team-ovr">0</strong></span>
                <span class="stat-badge">CHEM: <strong id="team-chem">0</strong></span>
            </div>
        </div>
        <div class="pitch-container" id="pitch"></div>
        <div class="squad-actions">
            <button class="btn btn-green" onclick="autoPick()">AUTO-PICK XI</button>
            <button class="btn btn-purple" onclick="playMatch()">‚öΩ PLAY MATCH</button>
        </div>
        <div class="roster-section">
            <h3>ROSTER (<span id="squad-count">0</span>)</h3>
            <div class="filter-bar">
                <button class="filter-btn active" onclick="setFilter('ALL', this)">ALL</button>
                <button class="filter-btn" onclick="setFilter('GK', this)">GK</button>
                <button class="filter-btn" onclick="setFilter('DEF', this)">DEF</button>
                <button class="filter-btn" onclick="setFilter('MID', this)">MID</button>
                <button class="filter-btn" onclick="setFilter('FWD', this)">FWD</button>
            </div>
            <div id="squad-list-container"></div>
        </div>
    </div>

    <div id="view-market" class="view-container full-panel">
        <div class="panel-header">
            <h2>TRANSFER MARKET</h2>
        </div>
        <div class="market-filters">
            <select onchange="filterMarket('position', this.value)">
                <option value="">All Positions</option>
                <option value="GK">GK</option>
                <option value="DEF">DEF</option>
                <option value="MID">MID</option>
                <option value="FWD">FWD</option>
            </select>
            <select onchange="filterMarket('rarity', this.value)">
                <option value="">All Rarities</option>
                <option value="bronze">Bronze</option>
                <option value="silver">Silver</option>
                <option value="gold">Gold</option>
                <option value="special">Special</option>
                <option value="icon">Icon</option>
            </select>
            <select onchange="filterMarket('league', this.value)">
                <option value="">All Leagues</option>
                <option value="Premier League">Premier League</option>
                <option value="La Liga">La Liga</option>
                <option value="Bundesliga">Bundesliga</option>
                <option value="Serie A">Serie A</option>
                <option value="Ligue 1">Ligue 1</option>
            </select>
        </div>
        <div id="market-listings" class="market-listings"></div>
    </div>

    <div id="view-sbc" class="view-container full-panel">
        <div class="panel-header">
            <h2>SQUAD BUILDING CHALLENGES</h2>
            <p class="panel-subtitle">Trade players for guaranteed rewards</p>
        </div>
        <div id="sbc-list" class="sbc-list"></div>
    </div>

    <div id="view-objectives" class="view-container full-panel">
        <div class="panel-header">
            <h2>OBJECTIVES</h2>
        </div>
        <div class="objectives-section">
            <h3>üìÖ DAILY</h3>
            <div id="daily-objectives" class="objectives-list"></div>
        </div>
        <div class="objectives-section">
            <h3>üìÜ WEEKLY</h3>
            <div id="weekly-objectives" class="objectives-list"></div>
        </div>
        <div class="objectives-section achievements-section">
            <h3>üèÜ ACHIEVEMENTS (<span id="ach-count">0</span>/<span id="ach-total">0</span>)</h3>
            <div class="ach-filter-bar">
                <button class="ach-filter active" onclick="filterAchievements('all', this)">ALL</button>
                <button class="ach-filter" onclick="filterAchievements('walking', this)">WALKING</button>
                <button class="ach-filter" onclick="filterAchievements('matches', this)">MATCHES</button>
                <button class="ach-filter" onclick="filterAchievements('squad', this)">SQUAD</button>
                <button class="ach-filter" onclick="filterAchievements('misc', this)">MISC</button>
            </div>
            <div id="achievements-list" class="achievements-list"></div>
        </div>
    </div>

    <div id="view-club" class="view-container full-panel">
        <div class="panel-header club-header">
            <h1 id="club-name-display">MY CLUB</h1>
            <div class="club-stats">
                <span>üí∞ <span id="coin-count">0</span></span>
                <span>üë• <span id="fan-count">0</span></span>
            </div>
        </div>
        
        <div id="stadium-render" class="stadium-preview"></div>
        <div id="inv-item-tracker" class="item-counter-box"></div>

        <div class="club-section">
            <button class="btn" onclick="toggleInventory()" id="inv-btn">SHOW DYES ‚ñº</button>
            <div id="club-inventory" style="display:none; background:#111; padding:10px; margin-top:10px; border:1px solid #444;">
                <h3>UNLOCKED DYES</h3>
                <div id="dye-grid" class="dye-grid"></div>
            </div>
            
            <div class="shop-grid">
                <div class="shop-item">
                    <div class="shop-icon">‚ö°</div>
                    <div class="shop-name">AGENT</div>
                    <div class="shop-price">500 Coins</div>
                    <button class="btn btn-purple btn-sm" onclick="buyItem('agent')">BUY</button>
                </div>
                <div class="shop-item">
                    <div class="shop-icon">üîé</div>
                    <div class="shop-name">SCOUT</div>
                    <div class="shop-price">200 Coins</div>
                    <button class="btn btn-sm" onclick="buyItem('scout')">BUY</button>
                </div>
            </div>
            
            <button class="btn btn-green" onclick="buildStadium()">üèóÔ∏è SET HOME HERE</button>
            <button class="btn" onclick="renameClub()">‚úèÔ∏è RENAME CLUB</button>
        </div>
        
    </div>

    <div id="view-mgr" class="view-container full-panel">
        <div class="panel-header profile-header">
            <h2>MANAGER PROFILE</h2>
        </div>
        
        <div class="manager-preview" id="manager-preview"></div>
        <div class="profile-name" id="mgr-name-display">MANAGER</div>
        
        <div class="division-display">
            <div class="division-badge" id="div-badge-icon">ü•â</div>
            <div class="division-name">DIVISION <span id="mgr-division">10</span></div>
            <div class="division-rating">RATING: <span id="mgr-rating">1000</span></div>
        </div>
        
        <div style="padding: 15px;">
            <button class="btn btn-gold" onclick="openWardrobe()">üëî CUSTOMIZE MANAGER</button>
        </div>
        
        <div class="profile-stats">
            <div class="profile-stat">
                <div class="profile-stat-value" id="stat-wins">0</div>
                <div class="profile-stat-label">WINS</div>
            </div>
            <div class="profile-stat">
                <div class="profile-stat-value" id="stat-matches">0</div>
                <div class="profile-stat-label">MATCHES</div>
            </div>
            <div class="profile-stat">
                <div class="profile-stat-value" id="stat-dist">0.0km</div>
                <div class="profile-stat-label">WALKED</div>
            </div>
            <div class="profile-stat">
                <div class="profile-stat-value" id="stat-contracts">0</div>
                <div class="profile-stat-label">CONTRACTS</div>
            </div>
            <div class="profile-stat">
                <div class="profile-stat-value" id="stat-sbcs">0</div>
                <div class="profile-stat-label">SBCs</div>
            </div>
            <div class="profile-stat">
                <div class="profile-stat-value" id="stat-packs">0</div>
                <div class="profile-stat-label">PACKS</div>
            </div>
        </div>
        
        <div class="wardrobe-section" style="padding: 15px;">
            <h4 style="color: var(--gold); font-family: 'Press Start 2P', monospace; font-size: 10px; margin-bottom: 10px;">üîì UNLOCKED ITEMS: <span id="unlocked-count">4</span>/<span id="total-items">30</span></h4>
        </div>
        
        <div style="padding: 15px;">
            <button id="sound-btn" class="btn btn-blue" onclick="toggleSound()">üîä SOUND: ON</button>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-btn active" onclick="switchView('map')">
            <span class="nav-icon">üó∫Ô∏è</span>
            MAP
        </div>
        <div class="nav-btn" onclick="switchView('squad')">
            <span class="nav-icon">‚öΩ</span>
            SQUAD
        </div>
        <div class="nav-btn" onclick="switchView('market')">
            <span class="nav-icon">üí∞</span>
            MARKET
        </div>
        <div class="nav-btn" onclick="switchView('sbc')">
            <span class="nav-icon">üîÑ</span>
            SBC
        </div>
        <div class="nav-btn" onclick="switchView('objectives')">
            <span class="nav-icon">üéØ</span>
            GOALS
        </div>
        <div class="nav-btn" onclick="switchView('club')">
            <span class="nav-icon">üè†</span>
            CLUB
        </div>
        <div class="nav-btn" onclick="switchView('mgr')">
            <span class="nav-icon">üëî</span>
            ME
        </div>
    </nav>

    <div id="modal-overlay"><div class="modal-box" id="modal-content"></div></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="players.js"></script>
    <script src="sbc.js"></script>
    <script src="market.js"></script>
    <script src="objectives.js"></script>
    <script src="script.js"></script>
</body>
</html>